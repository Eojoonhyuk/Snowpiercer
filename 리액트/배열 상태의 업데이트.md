# 배열 상태의 업데이트

배열은 자바스크립트에서 변경 가능하지만 상태에 저장할 때는 변경할 수 없는 것으로 처리해야 한다. 객체와 마찬가지로 상태에 저장된 배열을 업데이트 하려면 **새 배열을 생성(또는 기존 배열의 복사본을 만들기)한 다음 새 배열을 사용하도록 상태를 설정해야 한다.**

> React와 같은 라이브러리에서는 불변성(Immutable)을 유지하도록 권장합니다. 이는 배열을 직접 수정하는 대신 새로운 배열을 생성하여 업데이트하라는 원칙입니다. 이를 통해 예상치 못한 상태 변경을 방지하고 컴포넌트 간의 데이터 공유를 효율적으로 관리할 수 있습니다.

## 돌연변이 없이 배열 업데이트

자바스크립트에서 배열은 또 다른 종류의 객체일 뿐이다. object와 마찬가지로 React **상태의 배열을 읽기 전용으로 처리해야 한다.** 즉, arr[0] = 'bird'와 같은 내부의 항목을 재할당해서는 안 되며, push() 및 pop()와 같이 배열을 변경하는 메서드도 사용해서는 안된다.

|      |          피하기          |         선호          |
| :--: | :----------------------: | :-------------------: |
| 첨가 |      push, unshift       | concat, 스프레드 구문 |
| 제거 |    pop, shift, splice    |     filter, slice     |
| 교체 | splice, arr[i] = ...할당 |          map          |
| 정렬 |      reverse, sort       |   먼저 배열을 복사    |

## 배열 내부의 객체 업데이트

객체는 실제로 배열 "내부"에 위치 하지 않는다. 코드에서는 "내부"에 있는 것처럼 보일 수 있지만 배열의 각 개체는 배열이 "가리키는" 별도의 값이다.

**중첩된 상태를 업데이트할 때 업데이트하려는 지점부터 최상위 수준까지 복사본을 만들어야 한다.**
